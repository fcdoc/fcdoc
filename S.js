let e,t;const n=new Set("mp4|js|css|htm|html|md|avif|rss|gz|ico|json|png|svg|txt|webmanifest|xml".split("|")),a="https:",i=Number.parseInt,s=()=>i(new Date/1e3),r=(...e)=>console.error(...e),o=t=>e.transaction(["cdn"],t).objectStore("cdn"),l=e=>e.split(">"),c=l("fastly.jsdelivr.net/npm>cdn.jsdmirror.cn/npm>unpkg.com>jsd.onmicrosoft.cn/npm>cdn.jsdelivr.net/npm>jsd.cdn.noisework.cn/npm>quantil.jsdelivr.net/npm"),h=new Map(c.map(e=>{let t=e.indexOf("/");return t>0?[e.slice(0,t),e.slice(t+1)]:[e,""]})),p=`//${c[0]}/`,d=[],m=e=>{let[t,n,a]=e;e[3]=(n+1)*(a+1)/(t+1)},{host:w}=location,u=async()=>{[t,e]=await Promise.all([caches.open(1),new Promise((e,t)=>Object.assign(indexedDB.open(w,1),{onupgradeneeded:e=>{let t=e.target.result;t.objectStoreNames.contains("cdn")||t.createObjectStore("cdn",{keyPath:"H"}).createIndex("H","H",{unique:!0})},onsuccess:t=>e(t.target.result),onerror:e=>t(e.target.error)}))]);let n=o("readonly");d.splice(0,d.length,...await Promise.all(c.map(e=>new Promise(t=>{let a=n.get(e),i=(n=[0,0,0,0])=>{t([...n,e])};a.onsuccess=e=>{let t=e.target.result;if(t){let{i:e}=t;m(e),i(e)}else i()},a.onerror=e=>{r(e),i()}}))))},f=async(e,n,a,i,s)=>{if([200,204].includes(i.status)){if(!s){let e=i.headers.get("cache-control");e&&"no-cache"!==e&&(s=/max-age=(\d+)/.exec(e))&&(s=+s[1])}let a=new Response(i.clone().body,i);s>0&&a.headers.set("-",(e+s).toString(36)),await t.put(n,a)}else if(i.status>0)throw i;return i},g=async(e,n,a)=>{t||await u();let i=n,s=h.get(a.host);if(void 0!==s){let{pathname:t}=a,l=d.length;if(s){let e=s.length+1;t.slice(1,e)==s?t=t.slice(e):l=0}if(l){let s=a.protocol+"//",c=d.toSorted((e,t)=>e[3]-t[3]),h=[];return new Promise((p,d)=>{let w=async()=>{let g=c.shift(),y=g[4],$=h.length,j=new AbortController;h.push(j),n=new Request(a=new URL(s+y+t),{method:n.method});let v=new Date;try{g[3]+=2e3,p(await f(e,i,a,await fetch(n,{signal:j.signal}),9e8)),++g[0],l=0,clearTimeout(u);for(let e=h.length;e-- >0;)e!=$&&h[e].abort()}catch(e){l&&(++g[1],r(a+"",e),c.length?w():d(e))}finally{g[2]+=new Date-v,m(g),o("readwrite").put({H:y,i:g.slice(0,3)})}},u=setInterval(()=>{c.length?w():clearInterval(u)},2e3);w()})}}let l=a.pathname.endsWith(".woff2");"no-cors"!=n.mode||l||(n=new Request(a,{method:n.method}));let c=0;for(;;)try{return await f(e,i,a,await fetch(n),l?9e8:0)}catch(e){if(r(c,a+"",e),++c>9)throw e}};Object.entries({install:e=>e.waitUntil(self.skipWaiting()),activate:e=>e.waitUntil(clients.claim()),push:e=>{e.waitUntil(self.registration.showNotification(...e.data.json()))},notificationclick:e=>{e.notification.close(),e.waitUntil(clients.openWindow(e.notification.data.url))},fetch:e=>{let t=e.request,{method:o}=t;if(!["GET","OPTIONS"].includes(o))return;let c=new URL(t.url),{pathname:h,protocol:d}=c;if(!d.startsWith("http"))return;let m=s();if(c.host==w){if("/_"==h){e.respondWith((async()=>{let e=e=>t=>`${a}//${t}/${e}`,t=l("v.i18n.site>v.ok0.pw>v.3ti.site"),n=t.length,i=async e=>{let a=1,i=e(t[0]),s=new Request(i);for(;;){try{let e=await g(m,s,new URL(i));if(200==e.status)return await e.text()}catch(e){if(a==n)throw e;r(i,e)}if(a<n)i=e(t[a++]);else break}},s="@fcat/doc",o="@i18n.site/",c="site",h=i(e(s)),[d,w,u]=l(await i(e(o+c))),f=c+"@"+d,y=w+"@"+u,$=`${p}${s}`,j=async e=>(await g(m,new Request(e),new URL(e))).text(),v=async e=>JSON.parse(await j(e)),b=a+p,S=`${b}${o}${f}/-`,x=j(S+".js"),P=e=>e.map(e=>JSON.stringify(e)),R=await Promise.all([j(b+y+"/_.css"),j(S+".css"),...l(await h).map((e,t)=>v(a+$+"@"+e+"/"+"PB"[t]+".js"))]),T=P(R.pop()),[L,N,O]=P(R);return await x,new Response(`const _P=${O},_V='${$}',_I='${p}${o}';(()=>{const D=document,N=(t,o)=>D.head.appendChild(Object.assign(D.createElement(t),o)),C=(...l)=>l.map(t=>N("style",{innerHTML:t})),S=o=>N("script",o),M=t=>S({type:'module',innerHTML:t});D.body.style="background:var(--svgWait) 50% 50%/7em no-repeat;height:100dvh";S({type:'importmap',innerHTML:'{"imports":{"x/":"${p}${y}/","i/":"${p}${o}"}}'});S({innerHTML:${T[1]}});M(${T[2]});M('import "i/${f}/-.js"');C(${L},${N},${T[0]})})()`,{headers:{"Content-Type":"text/javascript"}})})());return}n.has(h.split(".").pop())||(t=new Request("/",{method:o}))}e.respondWith(caches.match(t).then(e=>{let n=()=>g(m,t,c).catch(e=>r(c+"",e));if(e){let t=e.headers.get("-");return t&&i(t,36)>m?e:new Promise(t=>{let a=setTimeout(()=>{t(e)},3e3);n().then(e=>{clearTimeout(a),t(e)})})}return n()}))}}).forEach(([e,t])=>addEventListener(e,t));